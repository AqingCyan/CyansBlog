(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{197:function(s,e,a){"use strict";a.r(e);var n=a(0),t=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"搭建开发环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建开发环境","aria-hidden":"true"}},[s._v("#")]),s._v(" 搭建开发环境")]),s._v(" "),a("p",[s._v("我们的目的很简单：")]),s._v(" "),a("ul",[a("li",[s._v("从0开始搭建，不使用任何框架")]),s._v(" "),a("li",[s._v("使用nodemon监测文件变化，自动重启node")]),s._v(" "),a("li",[s._v("使用 cross-env 设置环境变量")])]),s._v(" "),a("h2",{attrs:{id:"设计目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设计目录","aria-hidden":"true"}},[s._v("#")]),s._v(" 设计目录")]),s._v(" "),a("p",[s._v("为了开发后的代码更好的维护，我们将代码抽离成以下模块")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("|--app.js\n|--bin\n|  |__www.js\n|__package.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("app.js 文件作为独立的业务逻辑文件，将专门负责服务器的业务部分。")]),s._v(" "),a("li",[s._v("bin目录下的 www.js 文件启动一个 http 服务器，并且它的 "),a("code",[s._v("http.createServer(serverHandle)")]),s._v("中的回调函数被抽离到了app.js中的"),a("code",[s._v("serverHandle")]),s._v("中")]),s._v(" "),a("li",[s._v("这样做的好处其实是为了更加好的开发与维护，抽离模块并且将不同模块的事情分割，www.js只负责server的配置，而app.js则只负责服务器业务逻辑的处理")])]),s._v(" "),a("h2",{attrs:{id:"配置nodemon与cross-env"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置nodemon与cross-env","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置nodemon与cross-env")]),s._v(" "),a("p",[s._v("安装")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm i cross-env nodemon -D\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在"),a("code",[s._v("package.json")]),s._v("中配置")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cross-env NODE_ENV=dev nodemon ./bin/www.js"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("cross-env后面指定了运行环境是开发环境，后期上线部署的时候会添加线上环境启动")]),s._v(" "),a("li",[s._v("NODE_ENV我们指定的好处是可以在运行时，根据环境运行不同的配置。比如线上环境链接线上的数据库，在开发环境链接线下的数据库。")]),s._v(" "),a("li",[s._v("要根据NODE_ENV的参数来运行不同配置，那我们就需要获取在"),a("code",[s._v("package.json")]),s._v("中启动时的参数，"),a("code",[s._v("env: process.env.NODE_ENV")]),s._v("，process是node的一个全局变量，可以获取当前运行环境指定的参数是什么")]),s._v(" "),a("li",[s._v("nodemon 启动"),a("code",[s._v("./bin/www.js")]),s._v("，它可以热更新我们的服务器，这样就可以不用手动重启服务器了")])]),s._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("在一般的开发中，将不同的业务进行模块化的抽离是一个十分具有优势的方式。当大量的业务混在一起的时候，我们很难将负责数据的业务，负责逻辑的业务以及负责其他配置的业务一下子分清楚。易于维护永远都是我们在开发时需要注重的内容，这与经验与良好习惯有关。共勉！")])])])}],!1,null,null,null);e.default=t.exports}}]);